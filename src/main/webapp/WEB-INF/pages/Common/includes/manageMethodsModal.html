<div class="col-xs-7 col-md-7" xmlns:th="http://www.thymeleaf.org">
	<div class="modal fade" id="manageMethodModal"  role="dialog" aria-labelledby="manageMethodModal" aria-hidden="true">
		<div class="modal-dialog" style="width: 98%">
			<div class="modal-content" >
				<div class="modal-body" id="manageMethodBody">
					<div class="row form-group">
						<div class="col-xs-11 col-md-11">
							&nbsp;
						</div>
						<div class="col-xs-1 col-md-1">
							<button  id="closeManageMethodModal" type="button" class="close  pull-right glyphicon glyphicon-remove" data-dismiss="modal" onClick="propagateMethodUpdateEvent();" aria-hidden="true"/>
						</div>
					</div>

					<div>
						<iframe id="methodFrame"  name="myframe" width="100%" height="650px" frameborder="0"></iframe>
					</div>
				</div>
				<div class="modal-footer">
				</div>
			</div>
		</div>
	</div>
</div>

<div layout:fragment="page-script">
<script type="text/javascript" th:src="@{/static/js/breeding-methods.js}"></script>
<script type='text/javascript' th:inline="javascript">
//<![CDATA[
(function() {
	document.programMethodUrl = /*[[${programMethodURL}]]*/ '';
	document.projectID = /*[[${projectID}]]*/ '';
})();

$(function() {
	'use strict';
	$('#manageMethodModal').on('hidden.bs.modal', function() {
		if (BreedingMethodsFunctions.isModalAvailableAndForOpening('advanceNurseryModal')) {
			BreedingMethodsFunctions.openModal('advanceNurseryModal');
			recreateMethodCombo();
		} else if (BreedingMethodsFunctions.isModalAvailableAndForOpening('importStudyDesigConfirmationModal')) {
			BreedingMethodsFunctions.openModal('importStudyDesigConfirmationModal');
			recreateMethodCombo();
		} else if (BreedingMethodsFunctions.isModalAvailableAndForOpening('crossSettingsModal')) {
			$.event.trigger({
				type: 'breeding-method-update'
			});

			BreedingMethodsFunctions.openModal('crossSettingsModal');
			// Manage modal only available from import crosses
			// and this class is needed to display the combo
			$('#crossSettingsModal').addClass('import-crosses-from-file')
		}
	});
});

function closeMethodFrame() {
	recreateMethodCombo();
	$('#manageMethodModal').modal('hide');
}

function openManageMethods() {
	$('#manageMethodModal').modal({ backdrop: 'static', keyboard: true });
	if (methodIframeOpened == false) {
		methodIframeOpened = true;
		$('#methodFrame').attr('src', document.programMethodUrl + document.projectID);
	}
}

function propagateMethodUpdateEvent() {
	'use strict'
	$.event.trigger({
		type: 'method-update'
	});
}
//]]>
</script>
</div>
