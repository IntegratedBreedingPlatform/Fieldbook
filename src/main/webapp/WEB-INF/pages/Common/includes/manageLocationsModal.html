<div class="col-xs-7 col-md-7" xmlns:th="http://www.thymeleaf.org">
	<div class="modal fade" id="manageLocationModal"  role="dialog" aria-labelledby="manageLocationModal" aria-hidden="true">
		<div class="modal-dialog" style="width: 98%">
			<div class="modal-content" >
				<div class="modal-body" id="manageLocationBody">
					<div class="row form-group">
						<div class="col-xs-11 col-md-11">					
							&nbsp;
						</div>
						<div class="col-xs-1 col-md-1">
							<button id="closeManageLocationModal" type="button" class="close  pull-right glyphicon glyphicon-remove" data-dismiss="modal" onClick="propagateLocationUpdateEvent();" aria-hidden="true"/>
						</div>										
					</div>					
					<div>
						<iframe id="locationFrame" name="myframe" width="100%" height="650px" frameborder="0"></iframe>
					</div>
				</div>
				<div class="modal-footer"></div>
			</div>
		</div>
	</div>
</div>

<div layout:fragment="page-script">
	<script type="text/javascript" th:src="@{/static/js/locations.js}"></script>
	<script type='text/javascript' th:inline="javascript">
	//<![CDATA[
    (function() {
        document.programLocationUrl = /*[[${programLocationURL}]]*/ '';
        document.projectID = /*[[${projectID}]]*/ '';
    })();

    
    	
   	$(function() {
		'use strict';
		$('#manageLocationModal').on('hidden.bs.modal', function () {
			if(LocationsFunctions.isModalAvailableAndForOpening('advanceNurseryModal')){
				//we show the advance nursery modal
				LocationsFunctions.openModal('advanceNurseryModal');
			}else if(LocationsFunctions.isModalAvailableAndForOpening('addLotsModal')){
				//we show the advance nursery modal
				LocationsFunctions.openModal('addLotsModal');
			}else if(LocationsFunctions.isModalAvailableAndForOpening('importStudyDesigConfirmationModal')){
				LocationsFunctions.openModal('importStudyDesigConfirmationModal');
			} else if(LocationsFunctions.isModalAvailableAndForOpening('crossSettingsModal')){
				LocationsFunctions.openModal('crossSettingsModal');
			}
	    });
	});
    
	function closeLocationFrame(){
		propagateLocationUpdateEvent();
		$('#manageLocationModal').modal('hide');		
	}

    function propagateLocationUpdateEvent() {
    	'use strict'
        $.event.trigger({
            type : 'location-update'
        });        
    }

    function openManageLocations() {
    	$('#manageLocationModal').modal({ backdrop: 'static', keyboard: true });
    	if (locationIframeOpened == false) {
    		locationIframeOpened = true;
    		$('#locationFrame').attr('src', document.programLocationUrl + document.projectID);
    	}
    }
	//]]>
</script>
</div>