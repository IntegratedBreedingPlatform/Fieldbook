<form name="expDesignForm" novalidate="" ng-submit="generateDesign()" ng-cloak="">
    <section-container icon="bms-exp-design" heading="Experimental Design">
        <section-container name="content" heading="CHOOSE A DESIGN TYPE">
            <div class="row" name="content">
                <div class="col-md-12 add-bottom-padding">
                    <label class="control-label" style="vertical-align: top; position: relative; top: 6px;"><strong>Select the design type you would like to use for this trial:</strong></label>

                    <div style="display:inline-block">
                        <div  style="width: 350px !important;">
                            <select ui-select2="{minimumResultsForSearch : -1}" ng-model="currentDesignTypeId" ng-change="onSwitchDesignTypes(currentDesignTypeId)">
                                <option value="{{item.id}}" ng-repeat="item in designTypes| filterExperimentalDesignType">{{item.name}}</option>
                            </select>
                        </div>
                        <div ng-show="currentDesignType.withResolvable &amp;&amp; false">
                            <label class="checkbox-inline">
                                <input type="checkbox" ng-model="currentDesignType.data.isResolvable" id="inlineCheckbox2" value="option2"/> <span>Design will be resolvable</span>
                            </label>
                        </div>

                    </div>
                </div>
            </div>

        </section-container>
    </section-container>

    <div class="row">
        <div class="col-md-6 col-sm-7">
            <section-container heading="SPECIFY DESIGN PARAMETERS">
                <div name="content">
                    <div ng-include="currentParams"></div>
                    <div class="add_top_padding add-bottom-padding"><input type="submit" class="btn btn-info" value="Generate Design" /></div>
                </div>
            </section-container>
        </div>
        <div class="col-md-6 col-sm-5">
            <section-container heading="SUMMARY OF DESIGN DETAILS">
                <div name="content">
                    <div class="add-bottom-padding" ng-show="currentDesignType.data.noOfEnvironments &gt;= 0"><b>Number of trial environments:</b> <span>{{currentDesignType.data.noOfEnvironments}}</span></div>
                    <div class="add-bottom-padding" ng-show="currentDesignType.id > 0"><b>Number of treatments:</b> <span>{{totalGermplasmEntryListCount}}</span></div>
                    <div class="add-bottom-padding" ng-show="currentDesignType.id == 1"><b>Number of blocks:</b> <span>{{(currentDesignType.data.blockSize > 0) ? ((totalGermplasmEntryListCount % currentDesignType.data.blockSize === 0) ? totalGermplasmEntryListCount / currentDesignType.data.blockSize : '') : 0}} <b class="text-danger" ng-show="currentDesignType.data.blockSize > 0 &amp;&amp; totalGermplasmEntryListCount % currentDesignType.data.blockSize > 0">Invalid block size</b></span></div>
                    <div class="add-bottom-padding" ng-repeat="key in settings.factors.keys() | filterFactors : currentDesignType.id" >
                        <b>{{settings.factors.val(key).label}}</b> - <a show-details-modal="key">{{settings.factors.val(key).variable.name}}</a>
                    </div>
                    <div ng-show="currentDesignType.id == 0">
                        <div class="sub-content-heading"><b>Treatment factors:</b></div>
                        <table class="table table-curved">
                            <thead>
                                <tr>
                                    <th>NAME</th>
                                    <th>DESCRIPTION</th>
                                    <th># LEVELS</th>
                                </tr>
                            </thead>
                            <tbody>

                            <tr>
                                <td class="even"><a show-details-modal="entry_no_key" ng-init="entry_no_key = 8230" >{{germplasmDescriptorSettings.val(entry_no_key).variable.name}}</a></td>
                                <td class="even">{{germplasmDescriptorSettings.val(8230).variable.description}}</td>
                                <td class="even">{{totalGermplasmEntryListCount}}</td>
                            </tr>

                            <tr ng-repeat="treatmentKey in settings.treatmentFactors.keys()">
                                    <td  ng-class="{odd : $even, even : $odd}"><a show-details-modal="treatmentKey">{{settings.treatmentFactors.val(treatmentKey).variable.name}}</a></td>
                                    <td  ng-class="{odd : $even, even : $odd}">{{settings.treatmentFactors.val(treatmentKey).variable.description}}</td>
                                    <td  ng-class="{odd : $even, even : $odd}">{{currentDesignType.data.treatmentFactorsData[treatmentKey].levels}}</td>
                                </tr>

                            </tbody>
                        </table>
                    </div>
                </div>
            </section-container>
        </div>
    </div>
    <!-- TODO just for testing, to be removed -->
    <div id="measurementsDivTemp">
    </div>
</form>