<div ng-cloak="">
<div class="row" >
	<div class="col-lg-6 col-md-8 col-sm-10 col-xs-12">
		<section-container th:attr="heading=#{study.managesettings.germplasm.factors.label}" collapsible="true">
			<section-container icon="bms-factors" name="content"
							   th:attr="heading=#{study.studydetails.germplasm.descriptors}" help-tool-type="MANAGE_STUDIES_GERMPLASM"
							   add-variable="true" hide-variable="addVariable" on-hide-callback="onHideCallback" model-data="settings"
							   variable-type="1804" callback="onAddVariable(result, 1804)">
				<display-settings hide-delete="isHideDelete" name="content" predelete-function="onRemoveVariable" settings="settings" variable-type="1804"></display-settings>
            </section-container>
		</section-container>
	</div>
	<div class="col-lg-6 col-md-8 col-sm-10 col-xs-12">
		<section-container th:attr="heading=#{study.managesettings.entry.details.label}" collapsible="true">
			<!-- TODO: implement add entry detail -->
			<section-container icon="bms-factors" name="content"
							   th:attr="heading=#{study.studydetails.entry.details}"
							   add-variable="false" hide-variable="addVariable" on-hide-callback="onHideCallback" model-data="entryDetails"
							   variable-type="1815" callback="onAddVariable(result, 1815)">
				<display-settings hide-delete="true" name="content" predelete-function="onRemoveVariable" settings="entryDetails" variable-type="1815"></display-settings>
			</section-container>
		</section-container>
	</div>
</div>

<div ng-show="showUpdateImportList()" class="row form-group">
	<div class="col-xs-12 col-md-12">
		<label class="control-label" th:text="#{study.edit.study.overwrite.germplasm.list.message}">
		</label>
		&nbsp;&nbsp;&nbsp;
		<button class="btn btn-primary show-germplasm-details"  ng-click="updateModifyList()" th:text="#{study.germplasm.replace}">Overwrite</button>
	</div>
</div>
<div class="collapse in germplasmListDetails germplasmAndCheckSection" id="chooseGermplasmAndChecks" data-replace="0">
	<!-- Germplasm List Table View -->
	<div id="primary-section">
		<div>
			<img th:src="@{/static/img/review-list-details.png}" />
			<label class="control-label"><strong id="germplasmLabel" class="sub-content-heading">Study List</strong></label>


			<div  class="pull-right">
				 <div class="btn-group">
					<button type="button" class="btn btn-info dropdown-toggle fbk-action-btn" data-toggle="dropdown">
						<span th:text="#{study.studydetails.actions}">Actions</span>
					</button>
					<ul class="dropdown-menu fbk-right-button-drop-down" role="menu">
						<li>
							<a href="javascript: void(0)" ng-show="hasGermplasmListSelected()" ng-click="validateGermplasmForReplacement()" th:text="#{replace.germplasm}" >Replace Germplasm</a>
						</li>
						<li>
							<a href="javascript: void(0)" ng-click="showAddEntriesModal()" th:text="#{add.new.entries}" >Add New Entries</a>
						</li>
						<li ng-show="!hasGeneratedDesign()">
							<a href="javascript: void(0)" ng-click="setEntryTypeByBatch()" th:text="#{set.entry.type}" >Set Entry Type</a>
						</li>
					</ul>
				</div>
			</div>

		</div>
		<div ng-show="showImportList()">
			<label class="control-label"><a href="javascript: void(0)" ng-click="openGermplasmTree()">Browse</a> a list to work with.</label>
		</div>
	</div>

	<div ng-show="showStudyTable()">
		Total Entries: <label class="control-label control-label-bold" ng-model="numberOfEntries">{{numberOfEntries}}</label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		<div class="col-show-hide pull-right">
		</div>
	</div>

</div>



<div class="collapse in germplasmListDetails">
	<div class="row">
		<div class="col-xs-12" ng-show="showStudyTable()">
			<table id="germplasm-table"
				   datatable=""
				   dt-instance="nested.dtInstance"
				   dt-options="dtOptions"
				   dt-columns="dtColumns"
				   dt-column-defs="dtColumnDefs"
				   width="100%"
				   class="table table-curved table-condensed table-sorted">
			</table>
			<div class="row col-xs-12 col-md-12">
				<div ng-show="showClearListButton()" class="pull-left">
					<a style="margin-top: 5px;" href="javascript: void(0)" ng-click="resetStudyEntries()" class="btn btn-default"
					   th:text="#{common.clear.list}"></a>
				</div>
			</div>
		</div>
	</div>
</div>

<input type="hidden" id="keyForOverwrite" value=""/>
<input type="hidden" id="lastCheckSourcePrimary" value=""/>

<div class="row">
	<div th:include="/StudyManager/includes/importGermplasmListModal"></div>
</div>

<div class="row">
	<div th:include="/StudyManager/includes/importGermplasmListDetailsModal"></div>
</div>

</div>


<!-- Cyrus: moved the script to germplasm.js for organization. Only globals initialized from thymeleaf:spring should go here -->
<script type="text/javascript" th:inline="javascript">
//<![CDATA[

$(document).ready(function() {
	'use strict';
	document.onLoadGermplasmDetails();
});

//]]>
</script>
