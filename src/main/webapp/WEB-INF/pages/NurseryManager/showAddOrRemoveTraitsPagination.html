<form id="addVariableForm" role="form-horizontal" onsubmit="return validateCells();" class="form-horizontal" action="#" 
	th:action="@{/NurseryManager/addOrRemoveTraits}" method="post" th:object="${addOrRemoveTraitsForm}" enctype="multipart/form-data">
	<div class="germplasm-measurement-list-table  component">
       <!-- my-class table table-curved table-condensed   -->
		
				
				
				<table id="freezeheader" class="overflow-y  make-sticky"> 
					<thead>
						 <tr >
			               <th th:class="${measurementVariable.factor == true} ? 'factors' : 'variates'" th:each="measurementVariable, rowIndex : *{measurementVariables}" th:utext="${measurementVariable.name}">.variable name</th>
			
			             </tr>	
					</thead>
					<tbody>
						<tr th:class="${row.even}? 'even' : 'odd'" th:each="measurementRow, row: *{paginatedMeasurementRowList}">
           	
           		<th th:if="${measurementData.editable == false}" style="vertical-align:bottom; padding: 2px;" align="center" th:each="measurementData, rowIndex : ${measurementRow.dataList}"  >
             		<input type="hidden" th:if="${rowIndex.index} == 0" th:field="*{paginatedMeasurementRowList[__${row.index}__].experimentId}"/>
             		<label th:if="${measurementData.editable == false}" th:text="${measurementData.value}" ></label>
             		<input th:attr="data-type=${measurementData.dataType}" style="width: 100%" size="1" type="text" th:if="${measurementData.editable == true}" th:field="*{paginatedMeasurementRowList[__${row.index}__].dataList[__${rowIndex.index}__].value}"/>
             		<input type="hidden" th:field="*{paginatedMeasurementRowList[__${row.index}__].dataList[__${rowIndex.index}__].phenotypeId}"/>
             		<input type="hidden" th:if="${measurementData.editable == false}" th:field="*{paginatedMeasurementRowList[__${row.index}__].dataList[__${rowIndex.index}__].value}"/>
             		<input type="hidden" th:field="*{paginatedMeasurementRowList[__${row.index}__].dataList[__${rowIndex.index}__].label}"/>
             		<input type="hidden" th:field="*{paginatedMeasurementRowList[__${row.index}__].dataList[__${rowIndex.index}__].editable}"/>
             		<input type="hidden" th:field="*{paginatedMeasurementRowList[__${row.index}__].dataList[__${rowIndex.index}__].dataType}"/>             		
				</th>
				
             	<td  th:if="${measurementData.editable == true}" style="vertical-align:bottom; padding: 2px;" align="center" th:each="measurementData, rowIndex : ${measurementRow.dataList}"  >
             		<input type="hidden" th:if="${rowIndex.index} == 0" th:field="*{paginatedMeasurementRowList[__${row.index}__].experimentId}"/>
             		<label th:if="${measurementData.editable == false}" th:text="${measurementData.value}" ></label>
             		<input th:attr="data-type=${measurementData.dataType}" style="width: 100%" size="1" type="text" th:if="${measurementData.editable == true}" th:field="*{paginatedMeasurementRowList[__${row.index}__].dataList[__${rowIndex.index}__].value}"/>
             		<input type="hidden" th:field="*{paginatedMeasurementRowList[__${row.index}__].dataList[__${rowIndex.index}__].phenotypeId}"/>
             		<input type="hidden" th:if="${measurementData.editable == false}" th:field="*{measurementRowList[__${row.index}__].dataList[__${rowIndex.index}__].value}"/>
             		<input type="hidden" th:field="*{paginatedMeasurementRowList[__${row.index}__].dataList[__${rowIndex.index}__].label}"/>             		
             		<input type="hidden" th:field="*{paginatedMeasurementRowList[__${row.index}__].dataList[__${rowIndex.index}__].editable}"/>
             		<input type="hidden" th:field="*{paginatedMeasurementRowList[__${row.index}__].dataList[__${rowIndex.index}__].dataType}"/>             		
				</td>
             </tr>
					</tbody>
				</table>
				</div>
	
        <div >
	        <div th:if="*{measurementRowList != null and not #lists.isEmpty(measurementRowList)}">
	        	<div id="measurement-data-list-pagination"></div>
	        </div>
	        </div>
				
	<div class="form-group">&nbsp;
	</div>
	<div class="form-group">
	    <div class="col-xs-4 col-md-4">&nbsp;</div> 
	    <div class="col-xs-8 col-md-8">
	      	<a id="btnBack" href="" th:href="@{/NurseryManager/importGermplasmList}"   th:text="#{common.form.back.text}" class="btn btn-default" />
			<input type="submit" id="btnNext" th:value="#{common.form.next.text}" class="btn btn-primary" />
	      	<input type="submit" id="btnUpdate" th:value="#{common.form.update.text}" class="btn btn-primary" onclick="doSave();return false;"/>
	      
	    </div>
	  </div>
	  
	<div class="form-group">
		<div class="col-md-12">	
			<div class="modal fade" id="successMessageModal"  role="dialog" aria-labelledby="successMessageModal" aria-hidden="true">
				<div class="modal-dialog">
					<div class="modal-content" >
						<div class="modal-body" id="successMessageBody">
							<div style="text-align: center">
								<label th:text="#{nursery.addOrRemoveTraits.success.update.message}">Traits has been successfully updated.</label>
							</div>
						</div>
						<div class="modal-footer">    
			       			<a id="btnOK" href="" th:href="@{/NurseryManager}"   th:text="#{common.form.ok.text}" class="btn btn-primary" />	
		       			</div>
					</div><!-- /.modal-content -->
				</div><!-- /.modal-dialog -->
			</div><!-- /.modal -->		
			 
		</div>
	</div>  

</form>

<script type="text/javascript" th:src="@{/static/js/bootstrap-paginator.min.js}"></script>
				<script type='text/javascript' th:inline="javascript">
	//<![CDATA[
	           
	            var paginationUrl = /*[[@{/NurseryManager/addOrRemoveTraits/page/}]]*/;
        
        var options = {
            currentPage: /*[[${addOrRemoveTraitsForm.currentPage}]]*/,
            totalPages: /*[[${addOrRemoveTraitsForm.totalPages}]]*/,

            alignment:'center',
            useBootstrapTooltip:true,
            onPageClicked: function(e,originalEvent,type,page){     
            	if(validateCells()){
            		showPostPage(paginationUrl, options.currentPage, page, 'germplasm-measurement-list-table-div', 'addVariableForm');
            	}else{
            		event.stopImmediatePropagation();
            	}
            		
            }
        }
        
		if($('#measurement-data-list-pagination') != null){
			$('#measurement-data-list-pagination').bootstrapPaginator(options);	
		}
        $( document ).ready(function() {  	
        	//doStickyHeader();		     
       	 //  $('.germplasm-measurement-list-table td input').on("change", validateCells);
       	 //  $('.germplasm-measurement-list-table td input').on("focus", validateCells);
       	 //  $('.germplasm-measurement-list-table td input').on("blur", validateCells);
       	   if (document.URL.indexOf("viewNursery") > -1) {
       		   $("#btnBack").attr("href", "/Fieldbook/NurseryManager");
       		   $("#btnUpdate").show();
       		   $("#btnNext").hide();
       	   } else {
       		   $("#btnUpdate").hide();
       		   $("#btnNext").show();
       	   }    	   
       	   //$("#freezeheader").freezeHeader({ 'height': '500px' });
       	   //setTimeout(function(){$('#hdfreezeheader').css('top', '0px')}, 450);
   		});
        
       
      //]]>
    </script>
