<!-- 
<div class="col-xs-12 col-md-12" xmlns:th="http://www.thymeleaf.org">

<div class="move-left col-xs-12 col-md-12">
	<div class="form-group">
		<div id="page-create-field-map-message" class="">
		</div>				
	</div>
</div>
 -->
<div class="row col-xs-12 col-md-12" style="padding-top: 10px;">
<div class="row form-group" th:object="${nurseryDetails}">
	<input type="hidden" id="studyId" class="field-map-highlight" th:value="*{id}" />
	<div class="col-xs-12 col-md-12">
		<label class="control-label section-toggle toggle-icon" data-toggle="collapse" data-target=".nurseryDetails">
			<img th:src="@{/static/img/basic-details.png}" />
			<img style="margin-left: -10px" class="section-expanded" th:src="@{/static/img/expanded-arrow.png}" />
			<img style="display:none; margin-left: -10px"  class="section-collapsed" th:src="@{/static/img/collapsed-arrow.png}" />
			<strong class="sub-content-heading" th:text="#{nursery.nurserydetails.header} + ': ' + *{name}">NURSERY DETAILS</strong>
		</label>
		<div style="float:right;">
			<div class="btn-group">	
				<button type="button" class="btn btn-info dropdown-toggle" data-toggle="dropdown">
					<span th:text="#{nursery.nurserydetails.actions}">Actions</span>
				</button>
				<ul class="dropdown-menu" role="menu">
					<li>
						<a href="" style="display: none" id="open-study-url" th:href="@{/NurseryManager/addOrRemoveTraits/viewNursery}"></a>
						<a href="javascript: openStudy('nursery-table');" id="open-study-url-link" th:text="#{nursery.nurserydetails.action.edit}">Edit Nursery</a> 
					</li>
					<li>
						<a href="" style="display: none" id="advance-study-url" th:href="@{/NurseryManager/advance/nursery}"></a>
						<a href="javascript: advanceNursery('nursery-table');" id="advance-study-url-link" th:text="#{nursery.nurserydetails.action.advance}">Advance Nursery</a> 
					</li>
					<li>
						<a href="" style="display: none" id="fieldmap-url" th:href="@{/Fieldmap/enterFieldDetails/nursery}"></a>
						<a href="javascript: createFieldMap('nursery-table');" id="fieldmap-url-link" th:text="#{nursery.nurserydetails.action.createFieldmap}">Make Field Map</a>
					</li>
					<li>
						<a href="" style="display: none" id="label-printing-url" th:href="@{/LabelPrinting/specifyLabelDetails/nursery}"></a>
						<a href="javascript: createLabelPrinting('nursery-table');" id="label-printing-url-link" th:text="#{nursery.nurserydetails.action.printLabels}">Print Labels</a> 
					</li>
				</ul>
			</div>
		</div>
	</div>
	<div class="sectionContainer collapse in nurseryDetails">
		<div class="form-group" >
			<div style="padding-bottom: 5px" class="col-xs-4 col-md-4" th:each="basicDetail, rowStat : *{basicStudyDetails}">
				&nbsp;&nbsp;&nbsp;<strong><span style="word-wrap: break-word"  class="control-label" th:text="${basicDetail.variable.name}"></span>:</strong>
				&nbsp;<span th:text="${basicDetail.value}" class="div-select-val"></span>
				<span th:if="${basicDetail.variable.name == 'Field Map Created' and basicDetail.value == 'Yes'}">
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					<a href="" style="display: none" id="fieldmap-url" th:href="@{/Fieldmap/enterFieldDetails/nursery}"></a>
					<a href="javascript: showFieldMap('nursery-table');" id="view-fieldmap-url-link" th:text="#{nursery.nurserydetails.viewFieldMap}">View</a>
				</span>
			</div>
			<!-- div class="col-xs-2 col-md-2" th:if="${rowStat.odd}"></div -->
		</div>
	</div>
	<br/>
	<div class="col-xs-12 col-md-12">
		<label class="control-label section-toggle toggle-icon" data-toggle="collapse" data-target=".managementDetails">
			<img class="section-expanded" th:src="@{/static/img/expanded-arrow.png}" />
			<img class="section-collapsed" th:src="@{/static/img/collapsed-arrow.png}" style="display:none;" />
			<strong class="sub-content-heading" th:text="#{nursery.nurserydetails.management}">MANAGEMENT DETAILS</strong>
		</label>
		
	</div>
	<div class="sectionContainer collapse in managementDetails">
		<div class="form-group" >
			<div style="padding-bottom: 5px" class="col-xs-4 col-md-4" th:each="managementDetail, rowStat : *{managementDetails}">
				&nbsp;&nbsp;&nbsp;<strong><span style="word-wrap: break-word"  class="control-label" th:text="${managementDetail.variable.name}"></span>:</strong>
				&nbsp;<span th:text="${managementDetail.value}" class="div-select-val"></span>
			</div>
		</div>
	</div>
	<br />
	<div class="form-group">
		<div class="col-xs-12 col-md-12" style="padding-left: 20px">
			<a id="toggle-additional-link" class="section-toggle" data-toggle="collapse" data-target=".additionalDetails" th:text="#{nursery.nurserydetails.additional.show}"></a>
			&nbsp;<span th:text="#{nursery.nurserydetails.additional.text}"></span>
		</div>
	</div>
	<div class="sectionContainer collapse additionalDetails" style="padding-top: 10px;">
		<div class="col-xs-6 col-md-6">
			<div class="col-xs-12 col-md-12">
				<label class="control-label">
					<strong class="sub-content-heading" th:text="#{nursery.nurserydetails.nurseryConditions}">NURSERY CONDITIONS</strong>
				</label>
			</div>
			<div class="col-xs-12 col-md-12">
				<table style="table-layout: fixed;" class="my-class table table-curved table-condensed table-with-scroll-create" id="nurseryConditionDetails">
					<thead>
					<tr>
		                <th width="45%" th:utext="#{nursery.managesettings.plot.name}">.Name</th>
		                <th width="55%" th:utext="#{nursery.managesettings.plot.description}">.Description</th>
					</tr>
					</thead>
					<tbody>
	  					<tr th:each="nurseryConditionDetail, rowStat : *{nurseryConditionDetails}">
		  					<td width="45%" th:class="${rowStat.even}? 'even' : 'odd'">
		   						<a href="javascript: void(0);" th:onclick="'javascript:showBaselineTraitDetailsModal(\'' + 
									*{nurseryConditionDetails[__${rowStat.index}__].variable.cvTermId} + '\');'" th:text="${nurseryConditionDetail.variable.name}"></a>
		  					</td>
		  					<td width="55%" th:class="${rowStat.even}? 'even' : 'odd'" th:text="${nurseryConditionDetail.variable.description}"></td>
	  					</tr> 
					</tbody>
				</table>
			</div>
		</div>
		<div class="col-xs-6 col-md-6">
			<div class="col-xs-12 col-md-12">
				<label class="control-label">
					<img th:src="@{/static/img/factors.png}" />
					<strong class="sub-content-heading" th:text="#{nursery.nurserydetails.factors}">FACTORS</strong>
				</label>
			</div>
			<div class="col-xs-12 col-md-12">
				<table style="table-layout: fixed;" class="my-class table table-curved table-condensed table-with-scroll-create" id="factorDetails">
					<thead>
					<tr>
		                <th width="45%" th:utext="#{nursery.managesettings.plot.name}">.Name</th>
		                <th width="55%" th:utext="#{nursery.managesettings.plot.description}">.Description</th>
					</tr>
					</thead>
					<tbody>
	  					<tr th:each="factorDetail, rowStat : *{factorDetails}">
		  					<td width="45%" th:class="${rowStat.even}? 'even' : 'odd'">
		   						<a href="javascript: void(0);" th:onclick="'javascript:showBaselineTraitDetailsModal(\'' + 
									*{factorDetails[__${rowStat.index}__].variable.cvTermId} + '\');'" th:text="${factorDetail.variable.name}"></a>
		  					</td>
		  					<td width="55%" th:class="${rowStat.even}? 'even' : 'odd'" th:text="${factorDetail.variable.description}"></td>
	  					</tr> 
					</tbody>
				</table>
			</div>
		</div>
		<div class="col-xs-6 col-md-6">
			<div class="col-xs-12 col-md-12">
				<label class="control-label">
					<img th:src="@{/static/img/baseline-traits.png}" />
					<strong class="sub-content-heading" th:text="#{nursery.nurserydetails.traits}">TRAITS</strong>
				</label>
			</div>
			<div class="col-xs-12 col-md-12">
				<table style="table-layout: fixed;" class="my-class table table-curved table-condensed table-with-scroll-create" id="variateDetails">
					<thead>
						<tr>
			                <th width="45%" th:utext="#{nursery.managesettings.plot.name}">.Name</th>
			                <th width="55%" th:utext="#{nursery.managesettings.plot.description}">.Description</th>
						</tr>
					</thead>
					<tbody>
	  					<tr th:each="variateDetail, rowStat : *{variateDetails}">
		  					<td width="45%" th:class="${rowStat.even}? 'even' : 'odd'">
		   						<a href="javascript: void(0);" th:onclick="'javascript:showBaselineTraitDetailsModal(\'' + 
									*{variateDetails[__${rowStat.index}__].variable.cvTermId} + '\');'" th:text="${variateDetail.variable.name}"></a>
		  					</td>
		  					<td width="55%" th:class="${rowStat.even}? 'even' : 'odd'" th:text="${variateDetail.variable.description}"></td>
	  					</tr> 
					</tbody>
				</table>
			</div>
		</div>
		<div class="col-xs-6 col-md-6">
			<div class="col-xs-12 col-md-12">
				<label class="control-label">
					<img th:src="@{/static/img/variates.png}" />
					<strong class="sub-content-heading" th:text="#{nursery.nurserydetails.variates}">SELECTION VARIATES</strong>
				</label>
			</div>
			<div class="col-xs-12 col-md-12">
				<table style="table-layout: fixed;" class="my-class table table-curved table-condensed table-with-scroll-create" id="selectionVariateDetails">
					<thead>
						<tr>
			                <th width="45%" th:utext="#{nursery.managesettings.plot.name}">.Name</th>
			                <th width="55%" th:utext="#{nursery.managesettings.plot.description}">.Description</th>
						</tr>
					</thead>
					<tbody>
	  					<tr th:each="selectionVariateDetail, rowStat : *{selectionVariateDetails}">
		  					<td width="45%" th:class="${rowStat.even}? 'even' : 'odd'">
		   						<a href="javascript: void(0);" th:onclick="'javascript:showBaselineTraitDetailsModal(\'' + 
									*{selectionVariateDetails[__${rowStat.index}__].variable.cvTermId} + '\');'" th:text="${selectionVariateDetail.variable.name}"></a>
		  					</td>
		  					<td width="55%" th:class="${rowStat.even}? 'even' : 'odd'" th:text="${selectionVariateDetail.variable.description}"></td>
	  					</tr> 
					</tbody>
				</table>
			</div>
		</div>
	</div> <!-- section container -->	
	<br/>

	<div class="col-xs-12 col-md-12">
		<label class="control-label section-toggle toggle-icon dataset-toggle" data-toggle="collapse" data-target=".datasetDetails">
			<img th:src="@{/static/img/matching-nurseries.png}" />
			<img class="section-expanded" th:src="@{/static/img/expanded-arrow.png}" style="display:none;" />
			<img class="section-collapsed" th:src="@{/static/img/collapsed-arrow.png}" />
			<strong class="sub-content-heading" th:text="#{nursery.nurserydetails.datasets}">DATASETS</strong>
		</label>
		<div class="collapse datasetDetails">
			<div class="col-xs-12 col-md-12">
				<label class="control-label">
					<strong><span th:text="#{nursery.nurserydetails.datasets.choose}"></span></strong>&nbsp;&nbsp;
				</label>
				<select id="dataset-selection">
					<option id="" value="Please Choose"></option>
				</select>
			</div>
			<div class="row measurement-section" style="display:none;">
				<div id="measurement-details" class="col-xs-12 col-md-12">
					<ul id="measurement-tab-headers" class="nav nav-tabs">
					</ul>
					<div id="measurement-tabs">
					</div>
				</div>
			</div>
		</div>	
	</div>	
	
	
</div>

<div class="row">
	<div class="col-xs-12 col-md-12">
		<div id="showBaselineTraitDetails" th:include="/NurseryManager/baselineTraitDetails"></div>
	</div>
</div>

<div class="row">
	<div id="ontology-add-variable" th:include="/Fieldmap/selectTrialInstanceModal"></div>
</div>

    <div class="modal fade" id="manageTrialConfirmation" tabindex="-1" role="dialog" aria-labelledby="manageTrialConfirmationLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h4 class="modal-title">Confirmation</h4>
          </div>
          <div class="modal-body">
			<div class="row">
				<div class="col-xs-offset-1 col-xs-11 col-md-offset-1 col-md-11">
					<p th:text="#{fieldmap.confirmation.for.viewing.generated.fieldmap}">Do you wish to view the generated fieldmap(s)?</p>
				</div>
			</div>
			<br/>
			<div class="row">
				<div class="col-xs-offset-5 col-xs-7 col-md-offset-5 col-md-7">
					<div class="form-group">
						<input type="hidden" id="fieldmapStudyId" name="fieldmapStudyId" />
						<input type="hidden" id="fieldmapDatasetId" name="fieldmapDatasetId" />
						<input type="hidden" id="fieldmapGeolocationId" name="fieldmapGeolocationId" />
						<button type="button" class="btn btn-danger" th:value="#{common.form.yes.text}" onclick="javascript: proceedToCreateFieldMap();">No</button>			        	
						<button type="button" class="btn btn-primary" th:value="#{common.form.no.text}" onclick="javascript: proceedToGenerateFieldMap();">Yes</button>
					</div>
				</div>
			</div>			        	
          </div>
        </div>
      </div>
    </div>
</div>
<!-- 
</div>
 -->

<div layout:fragment="page-script">
<script type="text/javascript" th:src="@{/static/js/nurseryManager.js}"></script>
<script type="text/javascript" th:src="@{/static/js/fieldbook-common.js}"></script>
<script type='text/javascript' th:inline="javascript">
//<![CDATA[   
     	$(document).ready(function() {
     		$('.toggle-icon').click(function(){ 
     			var expandedImg = $(this).find(".section-expanded");
     			var collapsedImg = $(this).find(".section-collapsed");
     		   	expandedImg.toggle();
     		   	collapsedImg.toggle();
     		});

     		$("#open-study-url-link").click(function() {
     			selectedTableIds[0] = $("#studyId").val();
     		});

     		$("#advance-study-url-link").click(function() {
     			selectedTableIds[0] = $("#studyId").val();
     		});

     		$("#fieldmap-url-link").click(function() {
     			selectedTableIds[0] = $("#studyId").val();
     		});

     		$("#label-printing-url-link").click(function() {
     			selectedTableIds[0] = $("#studyId").val();
     		});

     		$("#view-fieldmap-url-link").click(function() {
     			selectedTableIds[0] = $("#studyId").val();
     		});
     		
     		$("#toggle-additional-link").click(function() {
     			if ($(this).text() == showText) {
     				$(this).text(hideText);
     			}
     			else {
     				$(this).text(showText);
     			}
     		});
     		
     		$(".dataset-toggle").click(function() {
     			alert("here");
     			loadDatasetDropdown($(this).parent().find("#dataset-selection"));
     		});
     		
     		$("#dataset-selection").change(function() {
     			if ($(this).val()) {
     				var id = $(this).val();
     				var name = $(this).find("option:selected").text();
     				var found = false;
     				$(this).parent().parent().find("#measurement-tabs").children().hide();
     				$(this).parent().parent().find("#measurement-tab-headers").find("li").each(function(index) {
     					$(this).removeClass("active");
     					if ($(this).text() == name) {
     						$(this).addClass("active");
     						$("#dset-tab-" + id).show();
     						found = true;
     					}
     				});
     				if (!found) {
     					loadDatasetMeasurementRowsViewOnly(id, name);
     				}
     			}
     		});
     	});
        

//]]>
</script>
</div>