<form id="createNurseryForm" role="form-horizontal" action="#"
th:action="@{/NurseryManager/createNursery}" method="post" th:object="${createNurseryForm}" enctype="multipart/form-data">
					<input type="hidden" th:field="*{requiredFields}"/>
					<input type="hidden" th:field="*{loadSettings}"/>
					<input type="hidden" th:field="*{locationId}"/>
                    <input type="hidden" th:field="*{breedingMethodId}"/>
                    <input type="hidden" th:field="*{locationUrl}"/>
                    <input type="hidden" th:field="*{breedingMethodUrl}"/>
                    <input type="hidden" th:field="*{importLocationUrl}"/>
                    <input type="hidden" th:field="*{projectId}"/>
                    <input type="hidden" th:field="*{studyNameTermId}"/>
                    <input type="hidden" th:field="*{startDateId}"/>
					<input type="hidden" th:field="*{endDateId}"/>
					<input type="hidden" th:field="*{openGermplasmUrl}"/>
					<input type="hidden" th:field="*{idNameVariables}"/>
	    			<div class="row form-group">
	    				<div class="col-xs-6 col-md-6">
	    					<div class="row">
			    				<div class="col-xs-10 col-md-10">
				    				<label class="control-label" data-toggle="collapse" data-target=".nurseryLevelDetails">
				    					<strong class="sub-content-heading" th:text="#{nursery.managesettings.management.details}">MANAGEMENT DETAILS</strong>
				    				</label>
				    				<span class="help-tooltip-nursery" data-placement="right" data-toggle="tooltip" th:title="#{nursery.managesettings.nursery.level.notes}">?</span>
				    			</div>
				    			<div class="col-xs-2 col-md-2 add-bottom-padding">
						    		<a class="btn btn-info" href="javascript: openAddVariablesSetting(1);" th:text="#{nursery.create.nursery.add.settings}">Add</a>
				    			</div>
			    			</div>
			    			<div class="sectionContainer" id="nurseryLevelSettings-dev">
			    				<!--  
		                        <div class="row form-group nurseryLevelSettings collapse in nurseryLevelDetails">
	                              	<div class="col-xs-5 col-md-5 1st">
		                            	&nbsp;&nbsp;&nbsp;<label id="expDesignLabel" for="fieldLayoutRandom" th:text="#{nursery.nurserydetails.select.field.layout.label} + ': '"></label>&nbsp;<span class="required">*</span>
	                                </div>
		                            <div class="col-xs-7 col-md-7 2nd">
		                            	<select class="form-control" th:field="*{fieldLayoutRandom}">
		                                	<option value="true" th:text="#{nursery.nurserydetails.option.with.randomization}">Unreplicated Design with Randomization</option>
		                                    <option value="false" th:text="#{nursery.nurserydetails.option.without.randomization}">Unreplicated Design without Randomization</option>
		                                </select>
		                            </div>
				    			</div>
				    			-->	
		    					<div class="row form-group nurseryLevelSettings" th:each="nurseryLevelVariable, rowStat : *{studyLevelVariables}">
		    						<div class="col-xs-5 col-md-5 1st">
		    							<span style="cursor: default; font-size: 16px;" th:if="${nurseryLevelVariable.deletable}" class="delete-icon" 
											th:onclick="'javascript: deleteVariable(1,\'' + ${nurseryLevelVariable.variable.cvTermId} + '\',$(this))'"></span>
											<input class="cvTermIds" type="hidden" th:field="*{studyLevelVariables[__${rowStat.index}__].variable.cvTermId}" />
		    							&nbsp;&nbsp;&nbsp;
		    							<span style="word-wrap: break-word"  class="control-label nursery-level-label" th:text="${nurseryLevelVariable.variable.name}"></span>:
		    							&nbsp;<span class="required">*</span>
		    						</div>
		    						<div class="col-xs-7 col-md-7 2nd">
		    						<!-- <div th:text="${nurseryLevelVariable.variable.cvTermId}"></div> -->
		    								<input class="cvTermIds nurseryLevelVariableIdClass" type="hidden" th:field="*{studyLevelVariables[__${rowStat.index}__].variable.cvTermId}" /> 
											<input style="width: 30%" th:if="${nurseryLevelVariable.variable.widgetType.type == 'DROPDOWN'}" 
											type="hidden" th:field="*{studyLevelVariables[__${rowStat.index}__].value}" class="form-control select2" />
											
											<!-- Show Favorite Location/Method -->
											<div style="width: 100%" th:if="${nurseryLevelVariable.variable.cvTermId}==*{locationId}" class="possibleValuesDiv">
											<input 
											type="checkbox" th:field="*{studyLevelVariables[__${rowStat.index}__].favorite}" 
											th:onclick="'javascript: toggleLocationDropdown(\'' + ${rowStat.index} + '\');'" />
											&nbsp;&nbsp;
											
											<span
											th:text="#{show.favorite.location}">Show Favorite Location</span>
											</div>
											<div style="width: 100%" th:if="${nurseryLevelVariable.variable.cvTermId}==*{breedingMethodId}" class="possibleValuesDiv">
											<input
											type="checkbox" th:field="*{studyLevelVariables[__${rowStat.index}__].favorite}" 
											th:onclick="'javascript: toggleMethodDropdown(\'' + ${rowStat.index} + '\');'" />
											&nbsp;&nbsp;
											<span 
											th:text="#{show.favorite.method}">Show Favorite Method</span>
											</div>
											
											<!-- store possible values of variable -->
											<div th:text="${nurseryLevelVariable.value}" class="div-select-val" style="display: none"></div>
											<div th:if="${nurseryLevelVariable.variable.widgetType.type == 'DROPDOWN'}" th:id="'possibleValuesJson' + ${rowStat.index}"
												class="possibleValuesJson" style="display:none" th:text="${nurseryLevelVariable.possibleValuesJson}">
											</div>
											<div th:if="${nurseryLevelVariable.variable.widgetType.type == 'DROPDOWN'}" th:id="'possibleValuesFavoriteJson' + ${rowStat.index}"
												class="possibleValuesFavoriteJson" style="display:none" th:text="${nurseryLevelVariable.possibleValuesFavoriteJson}">
											</div>
											
											<input th:if="${nurseryLevelVariable.variable.widgetType.type == 'NTEXT'}" 
											type="text" th:field="*{studyLevelVariables[__${rowStat.index}__].value}" class="form-control numeric-input" />
											
											<input th:if="${nurseryLevelVariable.variable.widgetType.type == 'CTEXT'}" 
											type="text" th:field="*{studyLevelVariables[__${rowStat.index}__].value}" class="form-control character-input" />
											
											<textarea th:if="${nurseryLevelVariable.variable.widgetType.type == 'TEXTAREA'}" 
											 th:field="*{studyLevelVariables[__${rowStat.index}__].value}" class="form-control character-input" rows="3" />
											
											<input th:if="${nurseryLevelVariable.variable.widgetType.type == 'DATE'}" 
											type="text" th:field="*{studyLevelVariables[__${rowStat.index}__].value}" class="form-control date-input" />
											 
											<input th:if="${nurseryLevelVariable.variable.widgetType.type == 'SLIDER'}" 
											type="text" th:field="*{studyLevelVariables[__${rowStat.index}__].value}"
											th:attr="data-min=${nurseryLevelVariable.variable.minRange}"
											th:attrappend="data-max=${nurseryLevelVariable.variable.maxRange}"
											class="form-control numeric-input" 										 
											/>
												 
											<span>
												<a th:if="${nurseryLevelVariable.variable.cvTermId}==*{locationId}" href="javascript: openManageLocations();" th:text="#{nursery.managesettings.manage.location}">Manage Location</a>
												<a th:if="${nurseryLevelVariable.variable.cvTermId}==*{breedingMethodId}" href="javascript: openManageMethods();" th:text="#{nursery.managesettings.manage.method}">Manage Method</a>
											</span>		
									</div>
		    					</div>
		    				</div>
			    			<div class="row form-group">
			    				<div class="col-xs-12 col-md-12">
			    					&nbsp;
			    				</div>
		    				</div>
						</div>
	    				<div class="col-xs-6 col-md-6">
	    					<div class="row">
			    				<div class="col-xs-10 col-md-10">
				    				<label class="control-label" data-toggle="collapse" data-target=".nurseryConditionsDetails">
				    					<strong class="sub-content-heading" th:text="#{nursery.create.nursery.conditions}">NURSERY CONDITIONS</strong>
				    				</label>
				    				<span class="help-tooltip-nursery" data-placement="right" data-toggle="tooltip" th:title="#{nursery.create.nursery.conditions.notes}">?</span>
				    			</div>
				    			<div class="col-xs-2 col-md-2 add-bottom-padding">
						    		<a class="btn btn-info" href="javascript: openAddVariablesSetting(7);" th:text="#{nursery.create.nursery.add.settings}">Add</a>
				    			</div>
			    			</div>
			    			<div class="sectionContainer collapse in nurseryConditionsDetails" id="nurseryConditionsSettings">
		    					<div class="row form-group nurseryConditionsSettings" th:each="nurseryCondition, rowStat : *{nurseryConditions}">
		    						<div class="col-xs-5 col-md-5 1st">
		    							<span style="cursor: default; font-size: 16px;" th:if="${nurseryCondition.deletable}" class="delete-icon" 
											th:onclick="'javascript: deleteVariable(7,\'' + ${nurseryCondition.variable.cvTermId} + '\',$(this))'"></span>
											<input class="cvTermIds" type="hidden" th:field="*{nurseryConditions[__${rowStat.index}__].variable.cvTermId}" />&nbsp;&nbsp;&nbsp;
											<span style="word-wrap: break-word"  class="control-label nursery-condition-label" th:text="${nurseryCondition.variable.name}"></span>:
		    							&nbsp;<span class="required">*</span>
		    						</div>
		    						<div class="col-xs-7 col-md-7 2nd">
		    								<input class="cvTermIds nurseryConditionVariableIdClass" type="hidden" th:field="*{nurseryConditions[__${rowStat.index}__].variable.cvTermId}" /> 
											<input style="width: 30%" th:if="${nurseryCondition.variable.widgetType.type == 'DROPDOWN'}" 
											type="hidden" th:field="*{nurseryConditions[__${rowStat.index}__].value}" class="form-control select2" />
																						
											<!-- store possible values of variable -->
											<div th:text="${nurseryCondition.value}" class="div-select-val" style="display: none"></div>
											<div th:if="${nurseryCondition.variable.widgetType.type == 'DROPDOWN'}" th:id="'possibleValuesJsonCons' + ${rowStat.index}"
												class="possibleValuesJsonCons" style="display:none" th:text="${nurseryCondition.possibleValuesJson}">
											</div>
											<div th:if="${nurseryCondition.variable.widgetType.type == 'DROPDOWN'}" th:id="'possibleValuesFavoriteJsonCons' + ${rowStat.index}"
												class="possibleValuesFavoriteJsonCons" style="display:none" th:text="${nurseryCondition.possibleValuesFavoriteJson}">
											</div>
											
											<input th:if="${nurseryCondition.variable.widgetType.type == 'NTEXT'}" 
											type="text" th:field="*{nurseryConditions[__${rowStat.index}__].value}" class="form-control numeric-input" />
											
											<input th:if="${nurseryCondition.variable.widgetType.type == 'CTEXT'}" 
											type="text" th:field="*{nurseryConditions[__${rowStat.index}__].value}" class="form-control character-input" />
											
											<textarea th:if="${nurseryCondition.variable.widgetType.type == 'TEXTAREA'}" 
											 th:field="*{nurseryConditions[__${rowStat.index}__].value}" class="form-control character-input" rows="3" />
											
											<input th:if="${nurseryCondition.variable.widgetType.type == 'DATE'}" 
											type="text" th:field="*{nurseryConditions[__${rowStat.index}__].value}" class="form-control date-input" />
											 
											<input th:if="${nurseryCondition.variable.widgetType.type == 'SLIDER'}" 
											type="text" th:field="*{nurseryConditions[__${rowStat.index}__].value}"
											th:attr="data-min=${nurseryCondition.variable.minRange}"
											th:attrappend="data-max=${nurseryCondition.variable.maxRange}"
											class="form-control numeric-input" 										 
											/>
									</div>
		    					</div>
		    				</div>
	    					<div class="row form-group">
			    				<div class="col-xs-12 col-md-12">
			    					&nbsp;
			    				</div>
		    				</div>
	    				</div>
    				</div>
	    			<div class="row form-group">
	    				<div class="col-xs-6 col-md-6">
	    					<div class="row">
			    				<div class="col-xs-10 col-md-10">
			    					<img width="23" height="23" th:src="@{/static/img/factors.png}" class="image-padding" /> &nbsp;
				    				<label class="control-label" data-toggle="collapse" data-target=".plotLevelDetails">
				    					<strong class="sub-content-heading" th:text="#{nursery.managesettings.plot.level.details}">PLOT-LEVEL DETAILS</strong>
				    				</label>
				    				<span class="help-tooltip-nursery" data-placement="right" data-toggle="tooltip" th:title="#{nursery.managesettings.plot.level.notes}">?</span>
				    			</div>
				    			<div class="col-xs-2 col-md-2 add-bottom-padding">
						    		<a class="btn btn-info" href="javascript: openAddVariablesSetting(2);" th:text="#{nursery.create.nursery.add.settings}">Add</a>
				    			</div>
			    			</div>
			    			<div class="row form-group collapse in plotLevelDetails">
			    				<div class="col-xs-12 col-md-12">
			    					<table style="table-layout: fixed;" class="my-class table table-curved table-condensed table-with-scroll" id="plotLevelSettings">
			    						<thead>
										<tr>
							                <th width="5%"></th>
							                <th width="45%" th:utext="#{nursery.managesettings.plot.name}">.Name</th>
							                <th width="50%" th:utext="#{nursery.managesettings.plot.description}">.Description</th>
										</tr>
										</thead>
										<tbody>
					    					<tr th:each="plotLevelVariable, rowStat : *{plotLevelVariables}">
					    						<td width="5%" style="text-align: center" th:class="${rowStat.even}? 'even' : 'odd'">
													<span style="cursor: default; font-size: 16px;" th:if="${plotLevelVariable.deletable}" class="delete-icon"
						    						th:onclick="'javascript: deleteVariable(2,\'' + ${plotLevelVariable.variable.cvTermId} + '\',$(this))'"></span>
						    						  			    						 
						    						<input class="cvTermIds" type="hidden" th:field="*{plotLevelVariables[__${rowStat.index}__].variable.cvTermId}" />
				    							</td>
						    					<td width="45%" th:class="${rowStat.even}? 'even' : 'odd'">
						    						<a href="javascript: void(0);" th:onclick="'javascript:showBaselineTraitDetailsModal(\'' + 
															*{plotLevelVariables[__${rowStat.index}__].variable.cvTermId} + '\');'" >
															<span th:text="${plotLevelVariable.variable.name}"></span></a>
						    					</td>
						    					<td width="50%" th:class="${rowStat.even}? 'even' : 'odd'" th:text="${plotLevelVariable.variable.description}"></td>
					    					</tr> 
				    					</tbody>
			    					</table>
			    				</div>
			    				<div class="col-xs-3 col-md-3"></div>
			    			</div>
	    				</div>
	    				<div class="col-xs-6 col-md-6">
	    					<div class="row">
			    				<div class="col-xs-10 col-md-10">
			    					<img width="23" height="23" th:src="@{/static/img/baseline-traits.png}" class="image-padding" /> &nbsp;
				    				<label class="control-label" data-toggle="collapse" data-target=".baselineTraitDetails">
				    					<strong class="sub-content-heading" th:text="#{nursery.managesettings.baseline.traits}">BASELINE TRAITS</strong>
				    				</label>
				    				<span class="help-tooltip-nursery" data-placement="right" data-toggle="tooltip" th:title="#{nursery.managesettings.baseline.traits.notes}">?</span>
				    			</div>
				    			<div class="col-xs-2 col-md-2 add-bottom-padding">
						    		<a class="btn btn-info" href="javascript: openAddVariablesSetting(3);" th:text="#{nursery.create.nursery.add.settings}">Add</a>
				    			</div>
			    			</div>
			    			<div class="row form-group collapse in baselineTraitDetails">
			    				<div class="col-xs-12 col-md-12">
			    					<table style="table-layout: fixed;" class="my-class table table-curved table-condensed table-with-scroll" id="baselineTraitSettings">
			    						<thead>
										<tr>
							                <th width="5%"></th>
							                <th width="45%" th:utext="#{nursery.managesettings.trait}">.Trait</th>
							                <th width="50%" th:utext="#{nursery.managesettings.trait.description}">.Description</th>
										</tr>
										</thead>
										<tbody>
					    					<tr class="baseline-traits" th:each="baselineTraitVariable, rowStat : *{baselineTraitVariables}">
					    						<td width="5%" style="text-align: center" th:class="${rowStat.even}? 'even' : 'odd'" >
						    						<span style="cursor: default; font-size: 16px;" th:if="${baselineTraitVariable.deletable}" class="delete-icon"
						    						th:onclick="'javascript: deleteVariable(3,\'' + ${baselineTraitVariable.variable.cvTermId} + '\',$(this))'"></span>
						    									    					
						    						<input class="cvTermIds" type="hidden" th:field="*{baselineTraitVariables[__${rowStat.index}__].variable.cvTermId}" />
					    						</td>
						    					<td width="45%" th:class="${rowStat.even}? 'even' : 'odd'">
						    						<a href="javascript: void(0);" th:onclick="'javascript:showBaselineTraitDetailsModal(\'' + 
														*{baselineTraitVariables[__${rowStat.index}__].variable.cvTermId} + '\');'" >
														<span th:text="${baselineTraitVariable.variable.name}"></span></a>
						    					</td>
						    					<td width="50%" th:class="${rowStat.even}? 'even' : 'odd'" th:text="${baselineTraitVariable.variable.description}"></td>						    					
					    					</tr> 
				    					</tbody>
			    					</table>
			    				</div>
			    				<div class="col-xs-3 col-md-3"></div>
			    			</div>
	    				</div>
    				</div>
    				<div class="row form-group">
	    				<div class="col-xs-6 col-md-6">
	    					<div class="row">
			    				<div class="col-xs-10 col-md-10">
			    					<img width="23" height="23" th:src="@{/static/img/variates.png}" class="image-padding" /> &nbsp;
				    				<label class="control-label" data-toggle="collapse" data-target=".selectionVariatesDetails">
				    					<strong class="sub-content-heading" th:text="#{nursery.create.nursery.selection.variates}">SELECTION VARIATES</strong>
				    				</label>
				    				<span class="help-tooltip-nursery" data-placement="right" data-toggle="tooltip" th:title="#{nursery.create.nursery.selection.variates.notes}">?</span>
				    			</div>
				    			<div class="col-xs-2 col-md-2 add-bottom-padding">
						    		<a class="btn btn-info" href="javascript: openAddVariablesSetting(6);" th:text="#{nursery.create.nursery.add.settings}">Add</a>
				    			</div>
			    			</div>
			    			<div class="row form-group collapse in selectionVariatesDetails">
			    				<div class="col-xs-12 col-md-12">
			    					<table style="table-layout: fixed;" class="my-class table table-curved table-condensed table-with-scroll" id="selectionVariatesSettings">
			    						<thead>
										<tr>
											<th width="5%"></th>
							                <th width="45%" th:utext="#{nursery.create.nursery.selection.variate.name}">.Name</th>
							                <th width="50%" th:utext="#{nursery.create.nursery.selection.variate.description}">.Description</th>
										</tr>
										</thead>
										<tbody>
					    					<tr th:each="selectionVariatesVariable, rowStat : *{selectionVariatesVariables}">
					    						<td width="5%" style="text-align: center" th:class="${rowStat.even}? 'even' : 'odd'">
													<span style="cursor: default; font-size: 16px;" th:if="${selectionVariatesVariable.deletable}" class="delete-icon"
						    						th:onclick="'javascript: deleteVariable(6,\'' + ${selectionVariatesVariable.variable.cvTermId} + '\',$(this))'"></span>
						    						  			    						 
						    						<input class="cvTermIds" type="hidden" th:field="*{selectionVariatesVariables[__${rowStat.index}__].variable.cvTermId}" />
				    							</td>
						    					<td width="45%" th:class="${rowStat.even}? 'even' : 'odd'">
						    						<a href="javascript: void(0);" th:onclick="'javascript:showBaselineTraitDetailsModal(\'' + 
															*{selectionVariatesVariables[__${rowStat.index}__].variable.cvTermId} + '\');'" >
															<span th:text="${selectionVariatesVariable.variable.name}"></span></a>
						    					</td>
						    					<td width="50%" th:class="${rowStat.even}? 'even' : 'odd'" th:text="${selectionVariatesVariable.variable.description}"></td>
					    					</tr> 
				    					</tbody>
			    					</table>
			    				</div>
			    				<div class="col-xs-3 col-md-3"></div>
			    			</div>
	    				</div>
	    				<div class="col-xs-6 col-md-6">
	    				</div>
    				</div>
 
	<div class="row">
		<div class="col-xs-12 col-md-12">
			<div th:include="/NurseryManager/ver2.0/addVariablesSettingModal"></div>
		</div>
	</div>
</form>
	
	 <div class="row">
        <div class="col-xs-12 col-md-12">
            <div id="manage-location" th:include="/Common/manageLocationsModal"></div>            
        </div>
    </div>
    <div class="row">
        <div class="col-xs-12 col-md-12">
            <div id="manage-location" th:include="/Common/manageMethodsModal"></div>
        </div>
    </div>
	<div class="row">
		<div class="col-xs-12 col-md-12">
    		<div id="showBaselineTraitDetails" th:include="/NurseryManager/ver2.0/baselineTraitDetails"></div>
   		</div>
    </div>
	

<div layout:fragment="page-script">
<script type="text/javascript" th:src="@{/static/js/nurseryManager.js}"></script>
<link th:href="@{/static/css/bootstrap-datepicker.css}" rel="stylesheet"/>
<script type="text/javascript" th:src="@{/static/js/bootstrap-datepicker.js}"></script>
<script type="text/javascript" th:src="@{/static/js/bootstrap-spinedit.js}"></script>
<link th:href="@{/static/css/bootstrap-spinedit.css}" rel="stylesheet"/>
<link th:href="@{/static/css/fieldbook-spinner.css}" rel="stylesheet"/>
<script type='text/javascript' th:inline="javascript">
//<![CDATA[   
	
    var requiredErrorMessage = /*[[#{ontology.browser.modal.error}]]*/;
    var requiredSettingErrorMessage = /*[[#{nursery.create.nursery.required.setting}]]*/;
    var uniqueBookNameErrorMessage = /*[[#{nursery.create.already.exists}]]*/;
    var nurseryFieldsIsRequired = /*[[#{nursery.create.is.required}]]*/;
    var nurseryTraitsIsRequired = /*[[#{nursery.create.traits.is.required}]]*/;
    var nurseryGermplasmListIsRequired = /*[[#{nursery.create.germplasm.list.is.required}]]*/;
    var checkTypeIsRequired = /*[[#{nursery.create.check.type.is.required}]]*/;
    
    //labels for method and location
    var showFavoriteMethodLabel = /*[[#{show.favorite.method}]]*/;
    var showFavoriteLocationLabel = /*[[#{show.favorite.location}]]*/;
    var manageMethodLabel = /*[[#{nursery.managesettings.manage.method}]]*/;
	var manageLocationLabel = /*[[#{nursery.managesettings.manage.location}]]*/;
	
	var varInListMessage = /*[[#{nursery.managesettings.variable.in.selected.list}]]*/;
	var idNameCounterpartAddedError = /*[[#{manage.settings.id.name.counterpart.added.error}]]*/;
	var valueNotNumeric = /*[[#{nursery.create.nursery.value.not.numeric}]]*/;
	var valueNotWIMinMax = /*[[#{nursery.create.nursery.value.not.within.min.max}]]*/;
    
    var locationId = '';
    var programLocationUrl = '';
    var programMethodUrl = '';
    var breedingMethodId = '';
    var locationIframeOpened = false;
    var methodIframeOpened = false;
    var importLocationUrl = '';
    var requiredFields = [];    
    var startDateId = '';
	var endDateId = '';

    
	$(document).ready(function() {
		if (getIEVersion() == 8) {
			$(".table-with-scroll-create").parent().addClass("variable-details");
			$(".table-with-scroll-create").removeClass("table-with-scroll-create");
		} 
        if($('#requiredFields').val() != ''){
            requiredFields = $('#requiredFields').val().split(',');    
        }
        startDateId = $('#startDateId').val();
			endDateId = $('#endDateId').val();
        locationId = $('#locationId').val();
        breedingMethodId = $('#breedingMethodId').val();
        programMethodUrl = $('#breedingMethodUrl').val();
        programLocationUrl = $('#locationUrl').val();
        importLocationUrl = $('#importLocationUrl').val();

		$("#folderNameSpan").html($("#folderName").val());
		$.each($(".possibleValuesJson"), function (index, divElem){
				var select2Index = $(divElem).attr("id").split("possibleValuesJson")[1]; 

				if (parseInt($("#" + getJquerySafeId("studyLevelVariables"+select2Index+".variable.cvTermId")).val()) == parseInt(locationId)) {
					initializePossibleValuesCombo($.parseJSON(divElem.innerHTML), 
	 			 			"#" + getJquerySafeId("studyLevelVariables"+select2Index+".value"), true, $(divElem).siblings(".div-select-val").html());
					
				} else {
					initializePossibleValuesCombo($.parseJSON(divElem.innerHTML), 
	 			 			"#" + getJquerySafeId("studyLevelVariables"+select2Index+".value"), false, $(divElem).siblings(".div-select-val").html());
					
				}
				
			});
				setTimeout('initializeDateAndSliderInputs()', 500);
		        addCreateNurseryRequiredAsterisk();
		        $('select').each(function(){
					$(this).select2();
				});
		
		$(".help-tooltip-nursery").tooltip();
	});
           
//]]>
</script>
</div>
