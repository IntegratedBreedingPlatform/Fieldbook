 <input type="hidden" id="study-type" name="study-type" value="Nursery" />
 <form role="form-horizontal" action="#" method="post" th:object="${createNurseryForm}">
 <div th:class="${#fields.hasErrors('file')} ? 'form-group has-error' : 'form-group'">
 	<div class="alert alert-danger" th:if="${#fields.hasErrors('*')} " th:each="err : ${#fields.errors('*')}" th:text="${err}"></div>
 </div>
</form>

<div class="col-xs-12 col-md-12">
	<div id="germplasm-measurement-list-table-div" th:include="/Common/showAddOrRemoveTraitsPagination"></div>
</div>
<div class="row">
	<div class="col-xs-12 col-md-12">
		<div id="manage-location" th:include="/Common/includes/openStudyModals"></div>
	</div>
</div>

<script type='text/javascript' th:inline="javascript">
	//<![CDATA[

	// FIXME Should not be using global variables or functions
	/*global serializedData, Spinner, showErrorMessage, console*/

	function doSave(){
		'use strict';

		var $form,
			$btnUpdate;

		$form = $('#addVariableForm');
		$btnUpdate = $('btnUpdate');

		serializedData = $form.serialize();

		$btnUpdate.attr('disabled', 'disabled');

		Spinner.toggle();

		$.ajax({
			url: '/Fieldbook/Common/addOrRemoveTraits/Nursery/updateTraits',
			type: 'post',
			dataType: 'json',
			data: serializedData,

			success: function(data){
				var $successMessageModal = $('#successMessageModal');

				if (data.status === '1') {
					$successMessageModal.modal({ backdrop: 'static', keyboard: true });
					$successMessageModal.modal('show');
				} else if (data.status === '-1') {
					showErrorMessage('page-message', data.errorMessage);
				}
			},

			error: function(jqXHR, textStatus, errorThrown){
				if (console) {
					console.log('The following error occured: ' + textStatus, errorThrown);
				}
			},

			complete: function(){
				$btnUpdate.removeAttr('disabled');
				Spinner.toggle();
			}
		});
	}
//]]>
</script>