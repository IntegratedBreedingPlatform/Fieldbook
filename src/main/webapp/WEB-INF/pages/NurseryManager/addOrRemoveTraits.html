 <div class="col-xs-12 col-md-12" xmlns:th="http://www.thymeleaf.org">
	<div class="page-header">
		<h1 th:text="#{nursery.open.nursery}">
			OPEN NURSERY
		</h1>
	</div>			  
</div>

<input type="hidden" id="study-type" name="study-type" value="Nursery" />
 <form role="form-horizontal"  action="#" 
     method="post" th:object="${addOrRemoveTraitsForm}">
 <div th:class="${#fields.hasErrors('file')} ? 'form-group has-error' : 'form-group'">
           <div class="alert alert-danger" th:if="${#fields.hasErrors('*')} " th:each="err : ${#fields.errors('*')}" th:text="${err}"></div>
  </div>
  </form>
  
	<div id="page-message"> 
	</div>
		
<div class="col-xs-12 col-md-12 move-left ">
	<div class="panel panel-default">
	   	<div class="panel-body manage-settings-panel-body">
	   	<div class="row form-group">
	   	
	   	<div class="col-xs-1 col-md-1 add_top_padding">
   			<label class="control-label"> <strong th:text="#{nursery.managenurseries.shownurseries.name}+':'"> Choose Saved Settings: </strong></label>
   		</div>
   		
   		<div class="col-xs-3 col-md-3 add_top_padding">
   			<label class="control-label" th:text="${addOrRemoveTraitsForm.studyName}"> </label>
   		</div>
   		
	<div style="float: right;">
	
		<div  class="btn-group">
		  <button type="button" class="btn btn-info dropdown-toggle" data-toggle="dropdown">
		    <span class="glyphicon glyphicon-cog"></span>&nbsp;&nbsp;Export
		  </button>
		  <ul class="dropdown-menu" role="menu">
		    <li>
	    		<a href="javascript: exportNursery(1);"  th:text="#{nursery.export.fieldlog.fieldroid}">Fieldlog / Fieldroid</a>
		    </li>		    
		    <li>
		    	<a href="javascript: exportNursery(2);"  th:text="#{nursery.export.r}">R</a> 
		    </li>
			<li>
		    	<a href="javascript: exportNursery(3);"  th:text="#{nursery.export.excel}">Excel</a> 
		    </li>
		   
			  <li class="dropdown-submenu">
			    <a  href="javascript: void(0)">KSU Fieldbook</a>
			    <ul class="dropdown-menu">
			      <li><a href="#">Excel</a></li>			     
			      <li><a href="#">CSV</a></li>
			    </ul>
			  </li>  
		  </ul>
		</div>
	
		<div  class="btn-group">
		  <button type="button" class="btn btn-info dropdown-toggle" data-toggle="dropdown">
		    <span class="glyphicon glyphicon-cog"></span>&nbsp;&nbsp;Import
		  </button>
		  <ul class="dropdown-menu" role="menu">
		    <li>
		    	<a href="javascript: importNursery(1);"  th:text="#{nursery.import.fieldlog.fieldroid}">Fieldlog / Fieldroid</a>
		    </li>		    
		    <li>
		    	<a href="javascript: importNursery(3);" th:text="#{nursery.import.excel}">Excel</a> 
		    </li>			    
		  </ul>
		</div>
	</div>
	</div>
	
			<div id="germplasm-measurement-list-table-div" th:include="/Common/showAddOrRemoveTraitsPagination">
	    	</div>		    	

	<div class="form-group">
	    <div class="col-xs-5 col-md-5">&nbsp;</div> 
	    <div class="col-xs-7 col-md-7">
	      	<a id="btnBack" href="" th:href="@{/NurseryManager/importGermplasmList}"   th:text="#{common.form.back.text}" class="btn btn-default" />
			<!-- input type="submit" id="btnNext" th:value="#{common.form.next.text}" class="btn btn-primary" / -->
	      	<input type="button" id="btnUpdate" th:value="#{common.form.update.text}" class="btn btn-primary" onclick="doSave();return false;"/>
	      
	    </div>
	  </div>
	  
	
	  	</div>
	</div>
</div>
    <div class="row">
        <div class="col-xs-12 col-md-12">
            <div id="manage-location" th:include="/Common/openStudyModals"></div>
        </div>
    </div>
     
				
				
    		
<script type="text/javascript" th:src="@{/static/js/bootstrap-fileupload.js}"></script>
<script type='text/javascript' th:inline="javascript">
	//<![CDATA[
	           
	            
		function doSave(){
			if(validateCells() == false)
				return false;
  	      	var $form = $("#addVariableForm");
  			serializedData = $form.serialize();
  			$("btnUpdate").attr("disabled", "disabled");
			Spinner.toggle();

			$.ajax({
				url: "/Fieldbook/Common/addOrRemoveTraits/Nursery/updateTraits",
				type: "post",
				dataType: "json",
				data: serializedData,
			    success: function(data){
				    if (data.status == "1") {
				    	$('#successMessageModal').modal({ backdrop: 'static', keyboard: true }) 
				    	$("#successMessageModal").modal("show");
			       	} else if (data.status == "-1") {
			       		showErrorMessage('page-message', data.errorMessage);
			       	}
			   }, 
			   error: function(jqXHR, textStatus, errorThrown){
					console.log("The following error occured: " + textStatus, errorThrown); 
			   }, 
			   complete: function(){  
				   $("btnUpdate").removeAttr("disabled");
				   Spinner.toggle();
			   } 
			});
		}     
       
      //]]>
    </script>
