<div class="modal fade nrm-var-selection-modal" tabindex="-1" role="dialog" aria-labelledby="nrm-var-selection-modal-title" aria-hidden="true">
	<div class="modal-dialog modal-lg">
		<div class="modal-content">
			<div class="modal-header">
				<!-- Title will get inserted here -->
			</div>
			<div class="modal-body">
				<div class="nrm-var-select-dropdown-container"></div>
				<div class="nrm-var-select-results">
					<!-- TODO Awaiting Rebecca's JSONified variable usage service
					<ul class="nrm-var-select-popular-vars"></ul> -->
					<div class="nrm-var-select-vars"></div>
					<div class="nrm-var-select-related-props-wrapper"></div>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal" th:utext="#{common.form.done.text}">Done</button>
			</div>
		</div>
	</div>
</div>

<!-- Renders a property's list of variables. The service we use strips out properties with no variables, so it should never be empty. -->
<script id="variable-template" type="text/x-handlebars-template">
<h3 th:utext="#{add.variable.dialog.variablelist}">Variables</h3>
<ul>
	{{#each variables}}
	<li class="nrm-var-select-var">
	<p>
		<span class="nrm-var-select-var-name-container">{{> variable-name}}</span>

		{{#if selected}}
			<button type="button" class="btn btn-default btn-s nrm-var-select-add icon-btn" disabled="disabled">
				<span class="glyphicon glyphicon-ok"></span>
			</button>
		{{else}}
			<button type="button" class="btn btn-default btn-s nrm-var-select-add icon-btn">
				<span class="glyphicon glyphicon-plus"></span>
			</button>
		{{/if}}
	</p>
	<p>{{description}}</p>
	</li>
	{{/each}}
</ul>
</script>

<script id="related-prop-template" type="text/x-handlebars-template">
{{#if properties}}
<h3>Related Properties</h3>
<ul>
	{{#each properties}}
	<li>
		<a href="#" class="nrm-var-property-name" data-id="{{propertyId}}">{{name}}</a>
	</li>
	{{/each}}
</ul>
{{/if}}
</script>

<script id="nrm-var-select-dropdown-template" type="text/x-handlebars-template">
	<input class="nrm-var-select-dropdown" type="hidden"></input>
</script>

<!-- Renders a variable name. Expects a variable object with a name and optional alias property. -->
<script id="nrm-var-select-name-partial" type="text/x-handlebars-template">
	<span class="nrm-var-name">{{name}}</span>
	{{#if alias}}
		<span> ({{alias}})</span>
	{{/if}}

	{{#unless selected}}
		<button type="button" class="btn btn-default btn-s nrm-var-select-name-alias icon-btn">
			<span class="glyphicon glyphicon-pencil"></span>
		</button>
	{{/unless}}
</script>

<!-- Renders an input that allows a user to provide an alias for a variable. Expects an object with a placeholder and optional alias.-->
<script id="nrm-var-select-name-alias-template" type="text/x-handlebars-template">
	<input class="nrm-var-select-alias-input" placeholder="{{placeholder}}" type="text" data-index="{{index}}" value="{{alias}}"></input>
	<button type="button" class="btn btn-default btn-xs nrm-var-select-name-save icon-btn">
		<span class="glyphicon glyphicon-ok"></span>
	</button>
	<button type="button" class="btn btn-default btn-xs nrm-var-select-name-cancel icon-btn">
		<span class="glyphicon glyphicon-remove"></span>
	</button>
</script>

<!-- Also expose the variable name partial as a template for standalone use.-->
<script id="nrm-var-select-name-template" type="text/x-handlebars-template">
	{{> variable-name}}
</script>

