<div class="col-xs-7 col-md-7" xmlns:th="http://www.thymeleaf.org">
	<!-- Modal -->
		<form id="add-field-form" role="form-horizontal" class="form-horizontal" action="#"
th:action="@{/Fieldmap/enterFieldDetails}" method="post" th:object="${fieldmapForm}" enctype="multipart/form-data">

   	<div class="modal fade" id="addFieldsModal" role="dialog" aria-labelledby="addVariablesSettingModal" aria-hidden="true">
		<div class="modal-dialog modal-large">
	    	<div class="modal-content">
			    	<div class="modal-header">
		            <button id="closeAddVariablesSettingModal" type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
		           <h4 class="modal-title" id="heading-modal" th:text="#{fieldmap.add.fields.header}">
		           	Add Fields
	         		</h4>
		          </div>
		          
	         	<div class="modal-body" id="addVariablesSettingBody">
	         		<div class="row">
		         		<div id="page-message-modal" class="col-xs-12 col-md-12">
		         		</div>
	         		</div>	         		
					
					<div class="row form-group">
						<div class="col-xs-12 col-md-12">
			         		<div class="col-xs-3  col-md-3 add_top_padding">
						  		<label class="control-label" th:text="#{fieldmap.add.fields.parent.location}">Parent Location:</label><span class="required">*</span>
						  	</div>
						    <div class="col-xs-6 col-md-6">
						      <input type="hidden" th:field="*{parentLocationId}" class="form-control select2" placeholder=""/>						      
						    </div>
			        	</div>
			        </div>
	         		<div class="row form-group">
						<div class="col-xs-12 col-md-12">
			         		<div class="col-xs-3  col-md-3 add_top_padding">
						  		<label class="control-label" th:text="#{fieldmap.trial.enter.field.name}">Field Name:</label><span class="required">*</span>
						  	</div>
						    <div class="col-xs-6 col-md-6">
						      <input type="text" class="form-control"  th:field="*{newFieldName}"  placeholder="Field Name"/>						      
						    </div>
			        	</div>
			        </div>
	         	</div>																							
	       		<div class="modal-footer addVariable-footer">    	       			
	       			<button type="button" class="btn btn-default" data-dismiss="modal" aria-hidden="true" th:text="#{common.form.cancel.text}">Cancel</button>
	       			<button type="button" id="addFields" class="btn btn-primary" aria-hidden="true" onclick="javascript: validateAddFields();">Save</button>	
       			</div>
	     	</div><!-- /.modal-content -->
   		</div><!-- /.modal-dialog -->
	</div><!-- /.modal -->	
	</form>
</div>
<div layout:fragment="page-script">
	
	
	<script type='text/javascript' th:inline="javascript">
	//<![CDATA[    


		   
		   	function showAddFieldPopup(){
		   		$('#page-message-modal').html('');
		   		$('#newFieldName').val('');
		   		recreatePopupLocationCombo();
		   		$('#addFieldsModal').modal({ backdrop: 'static', keyboard: false });		   	
		   	}
		   	function validateAddFields(){
		   		if($('#parentLocationId').val() == ''){
		   			showErrorMessage('page-message-modal', parentLocationRequired);
		   			return false;
		   		}
		   		
		   		if($('#newFieldName').val() == ''){
		   			showErrorMessage('page-message-modal', fieldNameRequired);
		   			return false;
		   		}
		   		
		   		//add
		   		addNewFieldLocation($('#newFieldName').val(), $('#parentLocationId').val());
		   	}
		   	
		   	function addNewFieldLocation(fieldName, locationId){
		   		Spinner.toggle();
		   		var dataForm = $('#add-field-form').serialize()
		   		$.ajax(
		   		{ url: "/Fieldbook/Fieldmap/enterFieldDetails/addNewField",
		   	       type: "POST",
		   	       data: dataForm,
		   	       success: function(data) {
						   if(data == 'success'){
							   showSuccessfulMessage("page-message-modal", fieldAddedSuccessfully);
			   	    	       $('#newFieldName').val('');   
						   }else{
							   showErrorMessage("page-message-modal", fieldNameDuplicateError);
						   }		   	    	   		   	    		   
		   	    		   
		   	       },
		   	       error: function(jqXHR, textStatus, errorThrown){
		   				console.log("The following error occured: " + textStatus, errorThrown); 
		   		   }, 
		   		   complete: function(){  
		   			   Spinner.toggle();
		   		   } 
		   	     }
		   	 );
		   	}
		
    //]]>
    </script>
</div>