<div class="col-md-12" xmlns:th="http://www.thymeleaf.org">
	<div class="page-header">
		<h1 th:text="#{fieldmap.header.field.plan}">
			FIELD PLAN
		</h1>
	</div>			  
</div>
<div class="row">
	<div class="col-md-3">
		<h4 th:text="#{fieldmap.header.make.a.field.plan}">Make a Field Plan</h4>
	</div>
	<div class="col-md-3">
		<h4 th:text="#{fieldmap.header.enter.details}">1. ENTER FIELD DETAILS</h4>
	</div>
	<div class="col-md-3">
		<h4 th:text="#{fieldmap.header.enter.planting.details}">2. ENTER PLANTING DETAILS</h4>
	</div>
	<div class="col-md-3">
		<h4 th:text="#{fieldmap.header.generate.field.map}">3. GENERATE FIELD MAP</h4>
	</div>
</div>
<form role="form-horizontal" class="form-horizontal" action="#"
th:action="@{/Fieldmap/generateFieldmapView}" method="post" th:object="${fieldmapForm}" enctype="multipart/form-data">

<div class="table-responsive">
	<table class="table" border="1">
	
	<thead>
		<tr>
			<td></td>
			<td th:each="j : ${#numbers.sequence(#object.userFieldmap.numberOfRangesInBlock, 1)}">
				<p th:text="${j}"></p>				
			</td>
			<td>Rows</td>
		</tr>
	</thead>
	<tbody>
		<tr th:each="i : ${#numbers.sequence(#object.userFieldmap.numberOfRowsInBlock, 1)}">
			<td><p th:text="'Range ' + ${i}"></p></td>
			<td th:each="j : ${#numbers.sequence(#object.userFieldmap.numberOfRangesInBlock, 1)}">
				<p th:text="${#object.fieldmapLabels[__${(i-1) * #object.userFieldmap.numberOfRangesInBlock + (j-1)}__]}"></p>
			</td>
			<td></td>
		</tr>
	</tbody>
	
	</table>
</div>

</form>
<div layout:fragment="page-script">		
	<script type="text/javascript" th:src="@{/static/js/raphael-min.js}"></script>
	<script type='text/javascript' th:inline="javascript">
	//<![CDATA[
	    var markedFields = new Array();
	           
	  	$(document).ready(function() {
	  		var paper = new Raphael(10, 1700, 5500, 1500);
	  		var data = /*[[${fieldmapForm.fieldmapShapes}]]*/;
	  		var jsonData = JSON.stringify(data);
	  		console.log(jsonData);
	  		var json = JSON.parse(jsonData);
	  		paper.add(json);
	  		
	  		paper.forEach(function(el) {
	  			if (el.title) {
	  				el.click(function(e) {
	  					alert(this.id);
	  					markedFields.push(this.id);
	  					this.attr({fill: "#ccc"});
	  				});
	  			}
	  		});
	  		/* for (var i = 0; i < json.length; i++) {
	  			if (json[i].title) {
		  			paper.text(json[i].x+30, json[i].y+20, json[i].title);
	  			}
	  		} */
	  		
	  	});
    //]]>
	</script>
</div>